# Guidelines for AI Contributions

This document provides conventions and practices for AI agents working in this repository.

## Project Structure

- **`src/`** – Core Python modules for simulations and causal analysis.
- **`notebooks/`** – Jupyter notebooks used for exploratory analysis and method development.
- **`tests/`** – Unit tests and utilities. Contains `run_tests.py` for running tests with coverage.
- **`results/`** (created at runtime) – Stores output data from simulations.
- **`logs/`** (created at runtime) – Log files generated by simulations and tests.

## Coding Conventions

- Language: **Python 3.9+**.
- Preferred libraries: `numpy`, `pandas`, `matplotlib`, and `statsmodels`.
- Use **snake_case** for file, function and variable names.
- Use **PascalCase** for class names.
- Include docstrings for public classes, methods, and functions.
- Keep notebooks focused on exploration. Large outputs should not be committed.

## Testing Protocols

Tests reside in the `tests/` folder. They are written with the standard `unittest` API but executed via **pytest**. The `tests/README.md` describes the available options:

```bash
./tests/run_tests.py       # runs pytest and produces coverage
pytest -v                  # run all tests directly
python -m pytest -v        # alternative invocation
```

For notebook-based work, install `ipytest` and run tests inside Jupyter:

```python
import ipytest
ipytest.autoconfig()
%%ipytest -q
# write tests here
```

Meaningful tests are encouraged for all new functionality. Coverage reports are generated in `coverage_html/index.html`.

## Pull Request Guidelines

- Branch from `main` and keep PRs focused.
- Provide a clear description of the changes and reference related issues when applicable.
- Include new or updated tests for any code changes.
- Ensure `pytest` passes locally before opening a PR.
- Follow the project coding conventions and keep commits concise.

## Programmatic Checks

Run the following commands before submitting a PR:

```bash
flake8 src tests            # style and linting
mypy src                    # optional type checking
python tests/run_tests.py   # run unit tests with coverage
```

These checks mirror the CI configuration in `.github/workflows` which installs dependencies, executes pytest, and uploads coverage reports.
